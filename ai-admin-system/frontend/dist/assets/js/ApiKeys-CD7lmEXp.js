/* empty css             *//* empty css                   *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css                     *//* empty css               *//* empty css                  */import{d as K,r as g,a as D,c as $,e,w as a,a1 as B,am as S,ap as z,aq as F,b as _,L as c,m as P,C as U,G as k,ak as j,ar as M,n as i,ac as q,h as G,j as O,k as h,as as H,p as d,o as J,_ as Q}from"./index-DFWwEtNp.js";const R={class:"apikeys-page"},W={class:"page-header"},X=K({__name:"ApiKeys",setup(Y){const r=g(!1),o=D({keyName:"",usageLimit:1e3}),m=g([{id:1,keyName:"测试密钥",keyValue:"sk-1234567890abcdef1234567890abcdef",usageCount:156,usageLimit:1e3,status:1,createTime:"2024-01-15 14:30"}]),b=s=>s.substring(0,8)+"..."+s.substring(s.length-8),w=async s=>{try{await navigator.clipboard.writeText(s),d.success("密钥已复制到剪贴板")}catch{d.error("复制失败")}},v=()=>{const s={id:Date.now(),keyName:o.keyName,keyValue:"sk-"+Math.random().toString(36).substring(2,34),usageCount:0,usageLimit:o.usageLimit,status:1,createTime:new Date().toLocaleString()};m.value.unshift(s),d.success("API密钥创建成功"),r.value=!1,Object.assign(o,{keyName:"",usageLimit:1e3})},C=s=>{s.status=s.status===1?0:1,d.success(s.status===1?"密钥已启用":"密钥已禁用")},V=s=>{const t=m.value.findIndex(p=>p.id===s);t>-1&&(m.value.splice(t,1),d.success("删除成功"))};return(s,t)=>{const p=U,n=P,u=F,E=M,x=z,N=B,A=h,f=O,I=H,L=G,T=S;return J(),$("div",R,[e(N,{class:"card-shadow"},{header:a(()=>[_("div",W,[t[6]||(t[6]=_("h2",{class:"gradient-text"},"API密钥管理",-1)),e(n,{type:"primary",onClick:t[0]||(t[0]=l=>r.value=!0)},{default:a(()=>[e(p,null,{default:a(()=>[e(k(q))]),_:1}),t[5]||(t[5]=i(" 创建密钥 "))]),_:1,__:[5]})])]),default:a(()=>[e(x,{data:m.value,style:{width:"100%"}},{default:a(()=>[e(u,{prop:"keyName",label:"密钥名称"}),e(u,{prop:"keyValue",label:"密钥值",width:"300"},{default:a(l=>[_("span",null,c(b(l.row.keyValue)),1),e(n,{type:"text",size:"small",onClick:y=>w(l.row.keyValue)},{default:a(()=>[e(p,null,{default:a(()=>[e(k(j))]),_:1})]),_:2},1032,["onClick"])]),_:1}),e(u,{prop:"usageCount",label:"使用次数"}),e(u,{prop:"status",label:"状态"},{default:a(l=>[e(E,{type:l.row.status===1?"success":"danger"},{default:a(()=>[i(c(l.row.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"createTime",label:"创建时间"}),e(u,{label:"操作",width:"200"},{default:a(l=>[e(n,{type:"warning",size:"small",onClick:y=>C(l.row)},{default:a(()=>[i(c(l.row.status===1?"禁用":"启用"),1)]),_:2},1032,["onClick"]),e(n,{type:"danger",size:"small",onClick:y=>V(l.row.id)},{default:a(()=>t[7]||(t[7]=[i("删除")])),_:2,__:[7]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(T,{modelValue:r.value,"onUpdate:modelValue":t[4]||(t[4]=l=>r.value=l),title:"创建API密钥",width:"500px"},{footer:a(()=>[e(n,{onClick:t[3]||(t[3]=l=>r.value=!1)},{default:a(()=>t[8]||(t[8]=[i("取消")])),_:1,__:[8]}),e(n,{type:"primary",onClick:v},{default:a(()=>t[9]||(t[9]=[i("创建")])),_:1,__:[9]})]),default:a(()=>[e(L,{model:o,"label-width":"100px"},{default:a(()=>[e(f,{label:"密钥名称"},{default:a(()=>[e(A,{modelValue:o.keyName,"onUpdate:modelValue":t[1]||(t[1]=l=>o.keyName=l),placeholder:"请输入密钥名称"},null,8,["modelValue"])]),_:1}),e(f,{label:"使用限制"},{default:a(()=>[e(I,{modelValue:o.usageLimit,"onUpdate:modelValue":t[2]||(t[2]=l=>o.usageLimit=l),min:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),me=Q(X,[["__scopeId","data-v-e548e332"]]);export{me as default};
