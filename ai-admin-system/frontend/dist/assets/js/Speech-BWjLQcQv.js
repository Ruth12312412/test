/* empty css             *//* empty css                    *//* empty css                *//* empty css               *//* empty css                 *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css                     */import{ab as w,d as Q,r as b,a as S,c as C,e as l,w as a,a1 as X,E as Y,g as Z,b as o,y as D,h as ee,j as le,aC as ae,C as te,G as j,aD as R,n as r,ag as oe,al as se,m as ne,k as re,ar as ue,L as _,p as u,o as k,_ as de}from"./index-DFWwEtNp.js";const A={transcribe:y=>w({url:"/speech/transcribe",method:"post",data:y,headers:{"Content-Type":"multipart/form-data"}}),synthesize:y=>w({url:"/speech/synthesize",method:"post",data:y,headers:{"Content-Type":"multipart/form-data"}}),translate:y=>w({url:"/speech/translate",method:"post",data:y,headers:{"Content-Type":"multipart/form-data"}}),getVoices:()=>w({url:"/speech/voices",method:"get"}),getLanguages:()=>w({url:"/speech/languages",method:"get"})},ie={class:"speech-container"},pe={class:"tab-content"},me={key:0,class:"result-section"},fe={class:"result-info"},ce={class:"tab-content"},_e={key:0,class:"result-section"},ve={class:"audio-player"},ge=["src"],be={class:"result-info"},ye={class:"tab-content"},he={key:0,class:"result-section"},xe={class:"result-info"},we=Q({__name:"Speech",setup(y){const N=b("stt"),d=S({file:null,language:""}),F=b(!1),v=b(null),i=S({text:"",voice:"alloy"}),z=b(!1),h=b(null),m=S({file:null,targetLanguage:"en"}),U=b(!1),g=b(null),G=t=>{d.file=t.raw},O=t=>{const e=t.type.startsWith("audio/"),f=t.size/1024/1024<25;return e?f?!0:(u.error("音频文件大小不能超过25MB!"),!1):(u.error("只能上传音频文件!"),!1)},W=async()=>{if(!d.file){u.error("请选择音频文件");return}F.value=!0;try{const t=new FormData;t.append("file",d.file),d.language&&t.append("language",d.language);const e=await A.transcribe(t);v.value=e.data,u.success("语音识别完成")}catch(t){console.error("语音识别失败:",t),u.error("语音识别失败")}finally{F.value=!1}},q=async()=>{if(!i.text.trim()){u.error("请输入文本内容");return}z.value=!0;try{const t=new FormData;t.append("text",i.text),t.append("voice",i.voice);const e=await A.synthesize(t);h.value=e.data,u.success("语音合成完成")}catch(t){console.error("语音合成失败:",t),u.error("语音合成失败")}finally{z.value=!1}},K=t=>{m.file=t.raw},P=t=>{const e=t.type.startsWith("audio/"),f=t.size/1024/1024<25;return e?f?!0:(u.error("音频文件大小不能超过25MB!"),!1):(u.error("只能上传音频文件!"),!1)},$=async()=>{if(!m.file){u.error("请选择音频文件");return}U.value=!0;try{const t=new FormData;t.append("file",m.file),t.append("target_language",m.targetLanguage);const e=await A.translate(t);g.value=e.data,u.success("音频翻译完成")}catch(t){console.error("音频翻译失败:",t),u.error("音频翻译失败")}finally{U.value=!1}},I=t=>{if(t===0)return"0 Bytes";const e=1024,f=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,x)).toFixed(2))+" "+f[x]},H=t=>{const e=document.createElement("a");e.href=t,e.download="synthesized_audio.mp3",document.body.appendChild(e),e.click(),document.body.removeChild(e)};return(t,e)=>{const f=te,x=ae,p=le,s=se,B=oe,V=ne,L=ee,M=re,c=ue,E=X,T=Z,J=Y;return k(),C("div",ie,[l(E,{class:"page-card"},{header:a(()=>e[8]||(e[8]=[o("div",{class:"card-header"},[o("h2",null,"🎤 语音服务"),o("p",null,"语音识别、语音合成和音频翻译功能")],-1)])),default:a(()=>[l(J,{modelValue:N.value,"onUpdate:modelValue":e[7]||(e[7]=n=>N.value=n),class:"speech-tabs"},{default:a(()=>[l(T,{label:"语音转文字",name:"stt"},{default:a(()=>[o("div",pe,[l(E,{shadow:"never"},{default:a(()=>[e[13]||(e[13]=o("h3",null,"🎙️ 语音识别",-1)),e[14]||(e[14]=o("p",{class:"description"},"上传音频文件，将语音内容转换为文字",-1)),l(L,{model:d,"label-width":"100px"},{default:a(()=>[l(p,{label:"音频文件"},{default:a(()=>[l(x,{ref:"sttUpload","auto-upload":!1,"on-change":G,"before-upload":O,accept:"audio/*",drag:""},{tip:a(()=>e[9]||(e[9]=[o("div",{class:"el-upload__tip"}," 支持 mp3/wav/m4a/flac 等格式，文件大小不超过25MB ",-1)])),default:a(()=>[l(f,{class:"el-icon--upload"},{default:a(()=>[l(j(R))]),_:1}),e[10]||(e[10]=o("div",{class:"el-upload__text"},[r(" 将音频文件拖到此处，或"),o("em",null,"点击上传")],-1))]),_:1,__:[10]},512)]),_:1}),l(p,{label:"语言"},{default:a(()=>[l(B,{modelValue:d.language,"onUpdate:modelValue":e[0]||(e[0]=n=>d.language=n),placeholder:"选择语言（可选）"},{default:a(()=>[l(s,{label:"自动检测",value:""}),l(s,{label:"中文",value:"zh"}),l(s,{label:"English",value:"en"}),l(s,{label:"日本語",value:"ja"}),l(s,{label:"한국어",value:"ko"})]),_:1},8,["modelValue"])]),_:1}),l(p,null,{default:a(()=>[l(V,{type:"primary",onClick:W,loading:F.value,disabled:!d.file},{default:a(()=>e[11]||(e[11]=[r(" 开始识别 ")])),_:1,__:[11]},8,["loading","disabled"])]),_:1})]),_:1},8,["model"]),v.value?(k(),C("div",me,[e[12]||(e[12]=o("h4",null,"识别结果：",-1)),l(M,{modelValue:v.value.text,"onUpdate:modelValue":e[1]||(e[1]=n=>v.value.text=n),type:"textarea",rows:6,readonly:"",class:"result-text"},null,8,["modelValue"]),o("div",fe,[l(c,null,{default:a(()=>[r("文件："+_(v.value.filename),1)]),_:1}),l(c,{type:"info"},{default:a(()=>[r("大小："+_(I(v.value.fileSize)),1)]),_:1}),l(c,{type:"success"},{default:a(()=>[r("语言："+_(v.value.language||"自动检测"),1)]),_:1})])])):D("",!0)]),_:1,__:[13,14]})])]),_:1}),l(T,{label:"文字转语音",name:"tts"},{default:a(()=>[o("div",ce,[l(E,{shadow:"never"},{default:a(()=>[e[18]||(e[18]=o("h3",null,"🔊 语音合成",-1)),e[19]||(e[19]=o("p",{class:"description"},"将文字内容转换为语音音频",-1)),l(L,{model:i,"label-width":"100px"},{default:a(()=>[l(p,{label:"文本内容"},{default:a(()=>[l(M,{modelValue:i.text,"onUpdate:modelValue":e[2]||(e[2]=n=>i.text=n),type:"textarea",rows:6,placeholder:"请输入要转换为语音的文字内容...",maxlength:"4000","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(p,{label:"语音类型"},{default:a(()=>[l(B,{modelValue:i.voice,"onUpdate:modelValue":e[3]||(e[3]=n=>i.voice=n),placeholder:"选择语音类型"},{default:a(()=>[l(s,{label:"Alloy - 中性语音",value:"alloy"}),l(s,{label:"Echo - 男性语音",value:"echo"}),l(s,{label:"Fable - 英式男性语音",value:"fable"}),l(s,{label:"Onyx - 深沉男性语音",value:"onyx"}),l(s,{label:"Nova - 女性语音",value:"nova"}),l(s,{label:"Shimmer - 柔和女性语音",value:"shimmer"})]),_:1},8,["modelValue"])]),_:1}),l(p,null,{default:a(()=>[l(V,{type:"primary",onClick:q,loading:z.value,disabled:!i.text.trim()},{default:a(()=>e[15]||(e[15]=[r(" 生成语音 ")])),_:1,__:[15]},8,["loading","disabled"])]),_:1})]),_:1},8,["model"]),h.value?(k(),C("div",_e,[e[17]||(e[17]=o("h4",null,"生成结果：",-1)),o("div",ve,[o("audio",{src:h.value.audioUrl,controls:"",preload:"metadata"}," 您的浏览器不支持音频播放 ",8,ge)]),o("div",be,[l(c,null,{default:a(()=>[r("语音："+_(h.value.voice),1)]),_:1}),l(c,{type:"info"},{default:a(()=>[r("长度："+_(h.value.textLength)+" 字符",1)]),_:1}),l(V,{size:"small",onClick:e[4]||(e[4]=n=>H(h.value.audioUrl))},{default:a(()=>e[16]||(e[16]=[r(" 下载音频 ")])),_:1,__:[16]})])])):D("",!0)]),_:1,__:[18,19]})])]),_:1}),l(T,{label:"音频翻译",name:"translate"},{default:a(()=>[o("div",ye,[l(E,{shadow:"never"},{default:a(()=>[e[24]||(e[24]=o("h3",null,"🌐 音频翻译",-1)),e[25]||(e[25]=o("p",{class:"description"},"将音频内容翻译为指定语言的文字",-1)),l(L,{model:m,"label-width":"100px"},{default:a(()=>[l(p,{label:"音频文件"},{default:a(()=>[l(x,{ref:"translateUpload","auto-upload":!1,"on-change":K,"before-upload":P,accept:"audio/*",drag:""},{tip:a(()=>e[20]||(e[20]=[o("div",{class:"el-upload__tip"}," 支持 mp3/wav/m4a/flac 等格式，文件大小不超过25MB ",-1)])),default:a(()=>[l(f,{class:"el-icon--upload"},{default:a(()=>[l(j(R))]),_:1}),e[21]||(e[21]=o("div",{class:"el-upload__text"},[r(" 将音频文件拖到此处，或"),o("em",null,"点击上传")],-1))]),_:1,__:[21]},512)]),_:1}),l(p,{label:"目标语言"},{default:a(()=>[l(B,{modelValue:m.targetLanguage,"onUpdate:modelValue":e[5]||(e[5]=n=>m.targetLanguage=n),placeholder:"选择目标语言"},{default:a(()=>[l(s,{label:"中文",value:"zh"}),l(s,{label:"English",value:"en"}),l(s,{label:"日本語",value:"ja"}),l(s,{label:"한국어",value:"ko"}),l(s,{label:"Français",value:"fr"}),l(s,{label:"Deutsch",value:"de"}),l(s,{label:"Español",value:"es"})]),_:1},8,["modelValue"])]),_:1}),l(p,null,{default:a(()=>[l(V,{type:"primary",onClick:$,loading:U.value,disabled:!m.file},{default:a(()=>e[22]||(e[22]=[r(" 开始翻译 ")])),_:1,__:[22]},8,["loading","disabled"])]),_:1})]),_:1},8,["model"]),g.value?(k(),C("div",he,[e[23]||(e[23]=o("h4",null,"翻译结果：",-1)),l(M,{modelValue:g.value.translatedText,"onUpdate:modelValue":e[6]||(e[6]=n=>g.value.translatedText=n),type:"textarea",rows:6,readonly:"",class:"result-text"},null,8,["modelValue"]),o("div",xe,[l(c,null,{default:a(()=>[r("文件："+_(g.value.filename),1)]),_:1}),l(c,{type:"info"},{default:a(()=>[r("大小："+_(I(g.value.fileSize)),1)]),_:1}),l(c,{type:"success"},{default:a(()=>[r("目标语言："+_(g.value.targetLanguage),1)]),_:1})])])):D("",!0)]),_:1,__:[24,25]})])]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}}),Te=de(we,[["__scopeId","data-v-b9111d9d"]]);export{Te as default};
